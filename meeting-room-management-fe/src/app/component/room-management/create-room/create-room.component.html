<h3 class="text-center">Thêm phòng họp</h3>

<div class="mt-4 p-3">
  <form [formGroup]="formAddRoom" (ngSubmit)="createRoom()">
    <div class="form-group row">
      <label for="name" class="col-sm-2 col-form-label">Tên Phòng <span class="required-field">*</span></label>
      <div class="col-sm-10">
        <input type="text" id="name" formControlName="name"
               [ngClass]="getClassName('name')"
               placeholder="Nhập tên phòng họp">
        <small class="form-text text-danger"
               *ngIf="formAddRoom.get('name')?.hasError('required')  && formAddRoom.get('name')?.touched">
          Tên phòng là bắt buộc.
        </small>
        <small class="form-text text-danger"
               *ngIf="formAddRoom.get('name')?.hasError('serverError')">
          {{formAddRoom.get('name')?.getError('serverError')}}
        </small>
      </div>
    </div>
    <div class="form-group row">
      <label for="floor" class="col-sm-2 col-form-label">Tầng <span class="required-field">*</span></label>
      <div class="col-sm-10">
        <select formControlName="floor" id="floor" [ngClass]="getClassName('floor')">
          <option disabled selected>Chọn tầng</option>
          <option *ngFor="let floor of floorList" [ngValue]="floor" [text]="floor.name"></option>
        </select>
        <small class="form-text text-danger"
               *ngIf="formAddRoom.get('floor')?.hasError('required')  && formAddRoom.get('floor')?.touched">
          Tầng là bắt buộc.
        </small>
        <small class="form-text text-danger"
               *ngIf="formAddRoom.get('floor')?.hasError('serverError')">
          {{formAddRoom.get('floor')?.getError('serverError')}}
        </small>
      </div>
    </div>
    <div class="form-group row">
      <label for="area" class="col-sm-2 col-form-label">Khu vực <span class="required-field">*</span></label>
      <div class="col-sm-10">
        <select formControlName="area" id="area" [ngClass]="getClassName('area')">
          <option disabled selected>Chọn khu vực</option>
          <option *ngFor="let area of areaList" [ngValue]="area" [text]="area.name"></option>
        </select>
        <small class="form-text text-danger"
               *ngIf="formAddRoom.get('area')?.hasError('required')  && formAddRoom.get('area')?.touched">
          Khu vực là bắt buộc.
        </small>
        <small class="form-text text-danger"
               *ngIf="formAddRoom.get('area')?.hasError('serverError')">
          {{formAddRoom.get('area')?.getError('serverError')}}
        </small>
      </div>
    </div>
    <div class="form-group row">
      <label for="capacity" class="col-sm-2 col-form-label">Sức chứa <span class="required-field">*</span></label>
      <div class="col-sm-10">
        <input type="text" id="capacity" formControlName="capacity" [ngClass]="getClassName('capacity')"
               placeholder="Nhập sức chứa">
        <small class="form-text text-danger"
               *ngIf="formAddRoom.get('capacity')?.hasError('required')  && formAddRoom.get('capacity')?.touched">
          Sức chứa là bắt buộc.
        </small>
        <small class="form-text text-danger"
               *ngIf="formAddRoom.get('capacity')?.hasError('invalidCapacity') && !formAddRoom.get('capacity')?.hasError('required')  && formAddRoom.get('capacity')?.dirty">
          Sức chứa phải là số nguyên.
        </small>
        <small class="form-text text-danger"
               *ngIf="formAddRoom.get('capacity')?.hasError('negativeCapacity')  && formAddRoom.get('capacity')?.dirty">
          Sức chứa phải lớn hơn 0.
        </small>
        <small class="form-text text-danger"
               *ngIf="formAddRoom.get('capacity')?.hasError('serverError')">
          {{formAddRoom.get('capacity')?.getError('serverError')}}
        </small>
      </div>
    </div>
    <div class="form-group row">
      <label for="roomType" class="col-sm-2 col-form-label">Loại phòng <span
        class="required-field">*</span></label>
      <div class="col-sm-10">
        <select formControlName="roomType" id="roomType" [ngClass]="getClassName('roomType')">
          <option disabled selected>Chọn loại phòng</option>
          <option *ngFor="let roomType of roomTypeList" [ngValue]="roomType" [text]="roomType.name"></option>
        </select>
        <small class="form-text text-danger"
               *ngIf="formAddRoom.get('roomType')?.hasError('required')  && formAddRoom.get('roomType')?.touched">
          Loại phòng là bắt buộc.
        </small>
        <small class="form-text text-danger"
               *ngIf="formAddRoom.get('roomType')?.hasError('serverError')">
          {{formAddRoom.get('roomType')?.getError('serverError')}}
        </small>
      </div>
    </div>
    <div class="form-group row">
      <label class="col-sm-2 col-form-label">Hình ảnh</label>
      <div class="col-sm-5 input-group">
        <div class="custom-file">
          <input type="file" id="image" class="custom-file-input" accept="image/*" (change)="selectFile($event)">
          <label class="custom-file-label" for="image">Chọn ảnh</label>
        </div>
      </div>
      <div class="col-sm-5">
        <div *ngIf="image">
          <img [src]="image" class="img-thumbnail" alt="image">
        </div>
      </div>
    </div>
    <div class="form-group row">
      <label class="col-sm-2 col-form-label">Tài sản:</label>
      <div class="col-sm-10 d-flex justify-content-between">
        <div class="mr-2">
          <button type="button" class="btn btn-outline-info" (click)="openDialogChooseEquipments()">Chọn tài sản
          </button>
        </div>
        <div *ngIf="equipmentList.length != 0" class="ml-2 px-3 rounded" style="background-color: #637680;">
          <div class="assets-list row">
            <div *ngFor="let categoryDTO of categoryWithEquipments" class="mx-2" style="">
              <div class="card rounded text-center m-2">
                <div class="card-body">
                  <p class="card-text">
                    {{categoryDTO.name}}: {{categoryDTO.equipmentList.length}}
                  </p>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
    <div class="row mt-5">
      <div class="col-sm-2"></div>
      <div class="col-sm-10 text-center">
        <button routerLink="/room" type="button" class="btn btn-secondary mr-4">Trở về</button>
        <button type="submit" class="btn btn-primary ml-4">Thêm</button>
      </div>
    </div>
  </form>
</div>
